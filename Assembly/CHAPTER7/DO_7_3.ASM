.MODEL	SMALL
.STACK	100H
.CODE
MAIN	PROC

;두 16진수를 입력받아 더한 결과 출력하기

@BEGIN:				;FIRST
	MOV	AH,2
	MOV	DL,'?'
	INT	21H

	XOR	BX,BX
	MOV	CL,4
	MOV	AH,1
	INT	21H	;INPUT
@WHILE1:
	CMP	AL,0DH
	JE	@END_WHILE1
	CMP	AL,' '
	JE	@END_WHILE1

	CMP	AL,30H
	JB	@ERROR
	CMP	AL,39H
	JA	@LETTER1	;A~

	AND	AL,0FH		;0~9 : TRANSLATE
	JMP	@SHIFT1
@LETTER1:
	CMP	AL,'A'
	JB	@ERROR
	CMP	AL,'F'
	JA	@ERROR

	SUB	AL,37H		;A~F : TRANSLATE HEX
@SHIFT1:
	SHL	BX,CL		;4 LEFT
	OR	BL,AL		;BL : INPUT
	INT	21H		;NEW INPUT
	JMP	@WHILE1


@END_WHILE1:			;SECOND
	XOR	DX,DX
	MOV	CL,4
	MOV	AH,1
	INT	21H
@WHILE2:
	CMP	AL,0DH
	JE	@END_WHILE2
	CMP	AL,' '
	JE	@END_WHILE2

	CMP	AL,30H
	JB	@ERROR
	CMP	AL,39H
	JA	@LETTER2
	
	AND	AL,0FH		;0~9 : TRANSLATE
	JMP	@SHIFT2
@LETTER2:
	CMP	AL,'A'
	JB	@ERROR
	CMP	AL,'F'
	JA	@ERROR

	SUB	AL,37H		;A~F : TRANSLATE HEX
@SHIFT2:
	SHL	DX,CL		;4 LEFT
	OR	DL,AL		;DL : INPUT
	INT	21H		;NEW INPUT
	JMP	@WHILE2


@END_WHILE2:			;ADD FIRST, SECOND
	ADD	BX,DX		;RESULT : BX (1234)
	MOV	AH,2
	MOV	DL,0DH
	INT	21H
	MOV	DL,0AH
	INT	21H

	MOV	DH,4
	MOV	CL,4
	MOV	AH,2
@OUTPUT:
	MOV	DL,BH		;DL : 12
	SHR	DL,CL		;DL : 01
	CMP	DL,0AH
	JL	@NUMBER	;0~9 : NUMBER
	ADD	DL,37H		;A~F : TRANSLATE HEX
	JMP	@NEXT
@NUMBER:
	OR	DL,30H		;0~9 : TRANSLATE
@NEXT:
	INT	21H		;PRINT!
	ROL	BX,CL		;1234 -> 2341
	DEC	DH		;COUNTER -1
	JNZ	@OUTPUT	;PRINT AGAIN

	JMP	@EXIT		;EXIT

@ERROR:
	MOV	AH,2
	MOV	DL,0DH
	INT	21H
	MOV	DL,0AH
	INT	21H
	JMP	@BEGIN
@EXIT:
	MOV	AH,4CH
	INT	21H
MAIN	ENDP
	END	MAIN
